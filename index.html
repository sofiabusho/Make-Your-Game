<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fish Tank Hunt</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Silkscreen:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

  <!-- Tailwind CSS (built from src/input.css → dist/styles.css) -->
  <link rel="stylesheet" href="./dist/styles.css" />
</head>

<body class="h-full m-0 overflow-hidden font-silkscreen bg-gradient-to-b from-cyan-900 to-indigo-900">

  <!-- ====================== GAME ROOT ====================== -->
  <div id="game-root" class="relative w-screen h-screen select-none">

    <!-- Sky Background -->
    <div id="sky" class="absolute inset-0 bg-cover bg-center bg-bottom bg-no-repeat z-0"
         style="background-image: url('style/images/background.jpeg')"></div>

    <!-- Game Area -->
    <div id="game" class="absolute inset-0 z-10 overflow-hidden cursor-none
                        shadow-[inset_0_0_0_2px_rgba(255,255,255,0.1)]">
      
      <!-- Decor -->
      <div id="decor" aria-hidden="true" class="absolute inset-0 z-0 pointer-events-none">
        <div id="plants-layer" class="absolute inset-0"></div>
        <div id="bubbles-layer" class="absolute inset-0 overflow-hidden"></div>
        <img id="treasure" src="style/images/treasure.gif" alt="treasure"
             class="absolute bottom-2.5 right-[68%] w-32 z-0 pointer-events-none" />
      </div>

      <!-- Entities (fish, turtles, etc.) -->
      <div id="entities" aria-hidden="true" class="absolute inset-0"></div>

      <!-- Coral Overlay -->
      <div id="coral-overlay" aria-hidden="true"
           class="absolute inset-0 bg-cover bg-center bg-bottom bg-no-repeat z-10"
           style="background-image: url('style/images/coral.png')"></div>

      <!-- Crosshair (Net) -->
      <div id="crosshair" aria-hidden="true"
           class="absolute w-28 h-28 -ml-14 -mt-14 bg-contain bg-center bg-no-repeat pointer-events-none z-30"
           style="background-image: url('style/images/net.png')"></div>
    </div>

    <!-- ====================== HUD ====================== -->
    <div id="hud" role="region" aria-label="Scoreboard"
         class="fixed top-2 left-1/2 -translate-x-1/2 flex flex-wrap items-center justify-center gap-3
                py-2 px-4 text-cyan-100 font-bold text-xs md:text-sm
                bg-black/90 border-2 border-cyan-400 rounded-lg
                shadow-hud backdrop-blur-md z-40">
      
      <div class="flex items-center gap-2 bg-sky-900/70 border border-cyan-400/50 rounded-md px-3 py-1">
        <span class="text-cyan-200">Level</span>
        <span id="hud-level" class="text-teal-400">1</span>
      </div>
      <div class="flex items-center gap-2 bg-sky-900/70 border border-cyan-400/50 rounded-md px-3 py-1">
        <span class="text-cyan-200">Time</span>
        <span id="hud-time" class="text-teal-400">60.0</span>
      </div>
      <div class="flex items-center gap-2 bg-sky-900/70 border border-cyan-400/50 rounded-md px-3 py-1">
        <span class="text-cyan-200">Score</span>
        <span id="hud-score" class="text-teal-400">0</span>
      </div>
      <div class="flex items-center gap-2 bg-sky-900/70 border border-cyan-400/50 rounded-md px-3 py-1">
        <span class="text-cyan-200">Lives</span>
        <div id="hud-lives" class="flex gap-1">
          <span class="heart active">❤️</span>
          <span class="heart active">❤️</span>
          <span class="heart active">❤️</span>
        </div>
      </div>
      <div class="flex items-center gap-2 bg-sky-900/70 border border-cyan-400/50 rounded-md px-3 py-1">
        <span class="text-cyan-200">FPS</span>
        <span id="hud-fps" class="text-teal-400">60</span>
      </div>

      <button id="pause-btn" class="bg-gradient-to-br from-cyan-500 to-cyan-600
                                    border-2 border-cyan-300 text-white rounded-md px-3 py-1
                                    shadow-btn hover:shadow-btnHover transition">
        Pause
      </button>
    </div>

    <!-- Combo Display -->
    <div id="combo-display" aria-live="polite"
         class="fixed top-16 right-4 text-2xl md:text-3xl font-bold text-yellow-400 opacity-0
                transition-opacity duration-300"></div>

    <!-- Center Notification -->
    <div id="center-notification" aria-live="assertive"
         class="fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2
                text-5xl md:text-6xl font-black text-white opacity-0 pointer-events-none z-50
                animate-notif"></div>

    <!-- ====================== STORY OVERLAY ====================== -->
<div id="story-overlay" role="dialog" aria-modal="true" aria-labelledby="story-title"
class="fixed inset-0 flex items-center justify-center overflow-hidden hidden z-50"
style="background-image: url('style/images/background.jpeg'); 
       background-size: cover; 
       background-position: center bottom; 
       background-repeat: no-repeat;">
<div class="menu-fish fish1"></div>
<div class="menu-fish fish2"></div>
<div class="menu-fish fish3"></div>
<div class="menu-fish fish4"></div>
<div class="menu-fish fish5"></div>

<div id="story-bubbles" class="absolute inset-0 pointer-events-none"></div>

<div class="story-card relative bg-black/90 text-cyan-100 p-8 md:p-10 rounded-xl
         w-[90vw] max-w-2xl max-h-[80vh] overflow-y-auto
         border-2 border-yellow-400 shadow-2xl backdrop-blur-lg">
<div class="story-content flex flex-col gap-6">
 <h2 id="story-title" class="text-center text-2xl md:text-3xl font-pressstart
            bg-gradient-to-r from-cyan-400 via-cyan-200 to-cyan-400 bg-clip-text text-transparent">
   The Underwater Adventure
 </h2>
 <div id="story-text" class="story-text flex items-center justify-center min-h-48 p-5
             bg-sky-900/60 rounded-lg border-2 border-cyan-400/40 backdrop-blur">
   <p class="story-paragraph text-center text-sm md:text-base leading-relaxed text-cyan-200 animate-story">
     Deep beneath the ocean waves…
   </p>
 </div>

 <div class="story-progress flex justify-center">
   <div class="story-dots flex gap-3">
     <span class="story-dot w-3 h-3 rounded-full bg-cyan-400/30 border-2 border-cyan-400/50 active"></span>
     <span class="story-dot w-3 h-3 rounded-full bg-cyan-400/30 border-2 border-cyan-400/50"></span>
     <span class="story-dot w-3 h-3 rounded-full bg-cyan-400/30 border-2 border-cyan-400/50"></span>
     <span class="story-dot w-3 h-3 rounded-full bg-cyan-400/30 border-2 border-cyan-400/50"></span>
   </div>
 </div>

 <div class="story-buttons flex justify-center gap-4">
   <button id="story-skip-btn"
           class="bg-gradient-to-br from-purple-600 to-purple-500
                  border-2 border-purple-300 text-white rounded-md px-5 py-2
                  shadow-btn hover:shadow-btnHover transition">
     Skip Story
   </button>
   <button id="story-next-btn"
           class="bg-gradient-to-br from-green-500 to-green-400
                  border-2 border-green-300 text-white rounded-md px-5 py-2
                  shadow-btn hover:shadow-btnHover transition">
     Continue
   </button>
 </div>
</div>
</div>
</div>


    <!-- ====================== START MENU ====================== -->
    <div id="start-overlay" role="dialog" aria-modal="true" aria-labelledby="start-title"
         class="fixed inset-0 flex items-center justify-center bg-gradient-to-b from-cyan-900 to-indigo-900 z-50"
         style="background-image: url('style/images/background.jpeg'); background-size: cover; background-position: center bottom; background-repeat: no-repeat;">
      <div id="menu-bubbles" class="absolute inset-0 pointer-events-none"></div>
      <div class="menu-fish fish1"></div>
      <div class="menu-fish fish2"></div>
      <div class="menu-fish fish3"></div>
      <div class="menu-fish fish4"></div>
      <div class="menu-fish fish5"></div>


      <div class="start-card bg-black/90 text-cyan-100 p-8 rounded-xl w-[90vw] max-w-xl
                  border-2 border-yellow-400 shadow-2xl backdrop-blur-lg">
        <div class="game-title text-center mb-6">
          <h1 id="start-title" class="text-4xl md:text-5xl font-pressstart
                     bg-gradient-to-r from-yellow-400 via-yellow-200 to-yellow-400 bg-clip-text text-transparent">
            Fish Tank Hunt
          </h1>
          <div class="subtitle text-lg text-cyan-300">Underwater Adventure</div>
        </div>

        <div class="menu-buttons flex flex-col gap-3">
          <button id="start-btn" class="bg-gradient-to-br from-green-500 to-green-400
                                        border-2 border-green-300 text-white rounded-md py-2
                                        shadow-btn hover:shadow-btnHover transition">
            Start Game
          </button>
          <button id="instructions-btn" class="bg-gradient-to-br from-purple-600 to-purple-500
                                              border-2 border-purple-300 text-white rounded-md py-2
                                              shadow-btn hover:shadow-btnHover transition">
            How to Play
          </button>
          <button id="settings-btn" class="bg-gradient-to-br from-orange-500 to-orange-400
                                           border-2 border-orange-300 text-white rounded-md py-2
                                           shadow-btn hover:shadow-btnHover transition">
            Settings
          </button>
          <button id="credits-btn" class="bg-gradient-to-br from-yellow-600 to-yellow-500
                                          border-2 border-yellow-300 text-white rounded-md py-2
                                          shadow-btn hover:shadow-btnHover transition">
            Credits
          </button>
        </div>

        <div class="high-scores mt-6">
          <h3 class="text-xl text-yellow-400 mb-2">High Scores</h3>
          <ul id="high-score-list" class="space-y-1 text-sm">
            <li>No scores yet</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- ====================== HOW TO PLAY POPUP ====================== -->
    <div id="howto-popup" class="fixed inset-0 flex items-center justify-center hidden z-50">
      <div class="popup-content bg-black/90 text-cyan-100 p-8 rounded-xl w-[90vw] max-w-2xl max-h-[80vh] overflow-y-auto
                  border-2 border-yellow-400 shadow-2xl backdrop-blur-lg relative">
        <button id="close-howto" class="absolute top-4 right-4 text-3xl text-yellow-400 hover:text-yellow-300">x</button>
        <h3 class="text-2xl text-yellow-400 mb-4">How to Play</h3>
        <div class="space-y-4 text-sm md:text-base">
          <p>Use your mouse to aim the net and click to catch fish!</p>
          <p>Different fish give different points. Build combos!</p>
          <p>Red fish give extra lives. Don't let fish escape!</p>
          <p>Press <kbd class="px-2 py-1 bg-cyan-900 rounded">ESC</kbd> to pause.</p>
        </div>
      </div>
    </div>

    <!-- ====================== SETTINGS POPUP ====================== -->
    <div id="settings-popup" class="fixed inset-0 flex items-center justify-center hidden z-50">
      <div class="popup-content bg-black/90 text-cyan-100 p-8 rounded-xl w-[90vw] max-w-md
                  border-2 border-yellow-400 shadow-2xl backdrop-blur-lg relative">
        <button id="close-settings" class="absolute top-4 right-4 text-3xl text-yellow-400 hover:text-yellow-300">x</button>
        <h3 class="text-2xl text-yellow-400 mb-4">Settings</h3>
        <div class="space-y-4">
          <div class="flex items-center justify-between">
            <label for="sound-toggle">Sound</label>
            <label class="relative inline-flex items-center cursor-pointer">
              <input type="checkbox" id="sound-toggle" checked class="sr-only peer">
              <div class="w-11 h-6 bg-gray-700 rounded-full peer-checked:bg-green-500
                          peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-0.5 after:left-0.5
                          after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all"></div>
            </label>
          </div>
          <div class="flex items-center justify-between">
            <label for="volume-slider">Volume</label>
            <div class="flex items-center gap-2 w-32">
              <span class="text-cyan-300">Speaker</span>
              <input type="range" id="volume-slider" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer
                            slider-thumb" min="0" max="1" step="0.01" value="0.8">
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ====================== CREDITS POPUP ====================== -->
    <div id="credits-popup" class="fixed inset-0 flex items-center justify-center hidden z-50">
      <div class="popup-content bg-black/90 text-cyan-100 p-8 rounded-xl w-[90vw] max-w-md
                  border-2 border-yellow-400 shadow-2xl backdrop-blur-lg relative">
        <button id="close-credits" class="absolute top-4 right-4 text-3xl text-yellow-400 hover:text-yellow-300">x</button>
        <h3 class="text-2xl text-yellow-400 mb-4">Credits</h3>
        <img src="style/images/credits.png" alt="Game Credits" class="w-full rounded-md mb-4" />
        <div class="text-center space-y-1 text-sm">
          <div>Charoula</div>
          <div>Sofia</div>
          <div>Andy</div>
          <div>Georgia</div>
        </div>
      </div>
    </div>

    <!-- ====================== PAUSE OVERLAY ====================== -->
    <div id="pause-overlay" role="dialog" aria-modal="true" aria-labelledby="pause-title"
         class="fixed inset-0 flex items-center justify-center bg-gradient-to-b from-cyan-900 to-indigo-900 hidden z-50">
      <div class="menu-fish fish1"></div>
      <div class="menu-fish fish2"></div>
      <div class="menu-fish fish3"></div>
      <div class="menu-fish fish4"></div>
      <div class="menu-fish fish5"></div>

      <div id="pause-bubbles" class="absolute inset-0 pointer-events-none"></div>

      <div class="start-card bg-black/90 text-cyan-100 p-8 rounded-xl w-[90vw] max-w-md
                  border-2 border-yellow-400 shadow-2xl backdrop-blur-lg">
        <h2 id="pause-title" class="text-3xl text-yellow-400 mb-6 text-center font-pressstart">Game Paused</h2>
        <div class="menu-stats space-y-3 text-sm">
          <div class="flex justify-between"><span>Level</span><span id="menu-level">1</span></div>
          <div class="flex justify-between"><span>Time</span><span id="menu-time">60.0</span></div>
          <div class="flex justify-between"><span>Score</span><span id="menu-score">0</span></div>
          <div class="flex justify-between items-center">
            <span>Lives</span>
            <div id="menu-lives" class="flex gap-1">
              <span class="heart active">❤️</span>
              <span class="heart active">❤️</span>
              <span class="heart active">❤️</span>
            </div>
          </div>
          <div class="flex justify-between"><span>FPS</span><span id="menu-fps">60</span></div>
        </div>
        <div class="menu-buttons flex flex-col gap-3 mt-6">
          <button id="continue-btn" class="bg-gradient-to-br from-green-500 to-green-400
                                           border-2 border-green-300 text-white rounded-md py-2
                                           shadow-btn hover:shadow-btnHover transition">
            Continue Game
          </button>
          <button id="restart-btn" class="bg-gradient-to-br from-purple-600 to-purple-500
                                          border-2 border-purple-300 text-white rounded-md py-2
                                          shadow-btn hover:shadow-btnHover transition">
            Restart Game
          </button>
          <button id="main-menu-btn" class="bg-gradient-to-br from-orange-500 to-orange-400
                                            border-2 border-orange-300 text-white rounded-md py-2
                                            shadow-btn hover:shadow-btnHover transition">
            Main Menu
          </button>
        </div>
      </div>
    </div>

    <!-- ====================== GAME OVER OVERLAY ====================== -->
    <div id="gameover-overlay" role="dialog" aria-modal="true" aria-labelledby="gameover-title"
         class="fixed inset-0 flex items-center justify-center bg-black/70 hidden z-50">
      <div class="menu-fish fish1"></div>
      <div class="menu-fish fish2"></div>
      <div class="menu-fish fish3"></div>

      <div id="gameover-bubbles" class="absolute inset-0 pointer-events-none"></div>

      <div class="start-card bg-black/90 text-cyan-100 p-8 rounded-xl w-[90vw] max-w-md
                  border-2 border-yellow-400 shadow-2xl backdrop-blur-lg text-center">
        <h2 id="gameover-title" class="text-3xl md:text-4xl text-yellow-400 mb-2 font-pressstart">Game Over!</h2>
        <div class="subtitle text-cyan-300 mb-4">Your Underwater Adventure Ends Here</div>
        <img id="gameover-octopus" src="style/images/octopus.gif" alt="Octopus" class="mx-auto w-32 mb-4" />
        <div id="final-score" class="text-5xl font-bold text-yellow-400 mb-6">0</div>

        <div class="menu-stats space-y-3 text-sm">
          <div class="flex justify-between"><span>Accuracy</span><span id="final-accuracy">0%</span></div>
          <div class="flex justify-between"><span>Best Combo</span><span id="final-combo">0x</span></div>
          <div class="flex justify-between"><span>Level Reached</span><span id="final-level">1</span></div>
          <div class="flex justify-between"><span>Fish Caught</span><span id="final-caught">0</span></div>
        </div>

        <div class="flex flex-col gap-3 mt-6">
          <button id="restart-gameover-btn" class="bg-gradient-to-br from-purple-600 to-purple-500
                                                   border-2 border-purple-300 text-white rounded-md py-2
                                                   shadow-btn hover:shadow-btnHover transition">
            Play Again
          </button>
          <button id="main-menu-gameover-btn" class="bg-gradient-to-br from-orange-500 to-orange-400
                                                     border-2 border-orange-300 text-white rounded-md py-2
                                                     shadow-btn hover:shadow-btnHover transition">
            Main Menu
          </button>
        </div>
      </div>
    </div>

  </div>

  <!-- Scripts -->
  <script type="module" src="./main.js"></script>
  <script type="module" src="src/story/story.js"></script>
  
</body>
</html>